{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,deleteCart}from'../actions/cartActions';function CartScreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var productId=match.params.id;var quantity=location.search?Number(location.search.split('=')[1]):'1';var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){if(productId){dispatch(addToCart(productId,quantity));}},[dispatch,productId,quantity]);var deleteFromCartHandler=function deleteFromCartHandler(id){dispatch(deleteCart(id));};var checkoutHandler=function checkoutHandler(){history.push('/login?redirect=shipping');};return/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(\"h1\",null,\"Shopping Cart\"),cartItems.length===0?/*#__PURE__*/React.createElement(Message,{variant:\"info\"},\"Cart is empty \",/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"text-link\"},\"Go Back\")):/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},cartItems.map(function(item){return/*#__PURE__*/React.createElement(ListGroup.Item,{key:item.product},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:2},/*#__PURE__*/React.createElement(Link,{to:\"/product/\".concat(item.product)},/*#__PURE__*/React.createElement(Image,{src:item.image,alt:item.name,fluid:true,rounded:true}))),/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(Link,{to:\"/product/\".concat(item.product),className:\"text-link\"},item.name)),/*#__PURE__*/React.createElement(Col,{md:2},\"$\",item.price),/*#__PURE__*/React.createElement(Col,{md:3},\"QTY: \",item.quantity),/*#__PURE__*/React.createElement(Col,{md:1},/*#__PURE__*/React.createElement(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return deleteFromCartHandler(item.product);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"})))));}))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.quantity;},0),\") items\"),\"$\",cartItems.reduce(function(acc,item){return acc+item.quantity*item.price;},0)),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-grid gap\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler},\"Proceed To Checkout\")))))));}export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useDispatch","useSelector","Row","Col","ListGroup","Image","Button","Card","Message","addToCart","deleteCart","CartScreen","_ref","match","location","history","productId","params","id","quantity","search","Number","split","dispatch","cart","state","cartItems","deleteFromCartHandler","checkoutHandler","push","createElement","md","length","variant","to","className","map","item","Item","key","product","concat","src","image","alt","name","fluid","rounded","price","type","onClick","reduce","acc","disabled"],"sources":["/home/kaliuser/Documents/portfolio/commercial_apps/django-ecommerce/ecommerce-django-react/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Row, Col, ListGroup, Image,  Button, Card } from 'react-bootstrap';\n\nimport Message  from '../components/Message';\nimport { addToCart, deleteCart } from '../actions/cartActions';\n\n\nfunction CartScreen({ match, location, history }) {\n    const productId = match.params.id\n    const quantity = location.search ? Number(location.search.split('=')[1]) : '1'\n    \n    const dispatch = useDispatch()\n\n    const cart = useSelector(state => state.cart)\n    const { cartItems } = cart\n\n    useEffect(() => {\n        if(productId){\n            dispatch(addToCart(productId, quantity ))\n        }\n    }, [dispatch, productId, quantity] )\n\n    const deleteFromCartHandler = (id) => {\n        dispatch(deleteCart(id))\n    }\n\n    const checkoutHandler = () => {\n        history.push('/login?redirect=shipping')\n    }\n\n    return (\n        <Row>\n            <Col md={8}>\n                <h1>Shopping Cart</h1>\n                {cartItems.length === 0 ? (\n                    <Message variant='info'>\n                        Cart is empty <Link to='/' className='text-link'>Go Back</Link>\n                    </Message>\n                ) :(\n                    <ListGroup variant = 'flush'>\n                        {cartItems.map(item => (\n                            <ListGroup.Item key={item.product}>\n                                <Row>\n                                    <Col md={2}>\n                                        <Link to={`/product/${item.product}`}>\n                                            <Image src={item.image} alt={item.name} fluid rounded />\n                                        </Link>\n                                    </Col>\n\n                                    <Col md={3}>\n                                        <Link to={`/product/${item.product}`} className='text-link'>{item.name}</Link>\n                                    </Col>\n\n                                    <Col md={2}>\n                                        ${item.price}\n                                    </Col>\n                                    \n                                    <Col md={3}>\n                                        QTY: {item.quantity}\n                                    </Col>\n\n                                    <Col md={1}>\n                                        <Button type='button' variant='light' onClick={() => deleteFromCartHandler(item.product)}>\n                                            <i className='fas fa-trash'></i>\n                                        </Button>\n                                    </Col>\n                                </Row>\n                            </ListGroup.Item>\n                        ))}\n                    </ListGroup>\n                )}\n            </Col>\n\n            <Col md={4}>\n                <Card>\n                    <ListGroup variant='flush'>\n                        <ListGroup.Item>\n                            <h2>Subtotal ({cartItems.reduce((acc, item ) => acc + item.quantity, 0)}) items</h2>\n                            ${cartItems.reduce((acc, item) => acc + item.quantity * item.price, 0)}\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <div className=\"d-grid gap\">\n                                <Button \n                                    type='button'\n                                    className='btn-block'\n                                    disabled={cartItems.length === 0}\n                                    onClick={checkoutHandler}    \n                                >\n                                    Proceed To Checkout\n                                </Button>\n                            </div>\n                        </ListGroup.Item>\n\n                    </ListGroup>\n                </Card>\n            </Col>\n        </Row>\n    )\n}\n\nexport default CartScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}