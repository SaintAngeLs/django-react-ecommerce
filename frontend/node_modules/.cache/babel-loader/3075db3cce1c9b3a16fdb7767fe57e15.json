{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Row,Col,Container}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from\"../components/Loader\";import Message from\"../components/Message\";import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';function ProductListScreen(_ref){var history=_ref.history,match=_ref.match;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.is_admin){history.push('/login');}if(successCreate){history.push(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts());}},[dispatch,history,userInfo,successDelete,successCreate,createProduct]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you shure you want to delete this product?')){dispatch(deleteProduct(id));}};var createProductHandler=function createProductHandler(product){dispatch(createProduct());};return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:10},/*#__PURE__*/React.createElement(\"h1\",null,\"Products\")),/*#__PURE__*/React.createElement(Col,{sm:2},/*#__PURE__*/React.createElement(Button,{size:\"sm\",className:\"my-3\",onClick:createProductHandler},\"New product\"))),loadingDelete&&/*#__PURE__*/React.createElement(Loader,null),errorDelete&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorDelete),loadingCreate&&/*#__PURE__*/React.createElement(Loader,null),errorCreate&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorCreate),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Category\"),/*#__PURE__*/React.createElement(\"th\",null,\"Brand\"),/*#__PURE__*/React.createElement(\"th\",null,\"Price $\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,products.map(function(product){return/*#__PURE__*/React.createElement(\"tr\",{key:product._id},/*#__PURE__*/React.createElement(\"td\",null,product._id),/*#__PURE__*/React.createElement(\"td\",null,product.name),/*#__PURE__*/React.createElement(\"td\",null,product.category),/*#__PURE__*/React.createElement(\"td\",null,product.brand),/*#__PURE__*/React.createElement(\"td\",null,product.price),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},/*#__PURE__*/React.createElement(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),className:\"m-1\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-sm rounded\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa-solid fa-marker\"}))),/*#__PURE__*/React.createElement(Button,{className:\"btn-sm rounded\",onClick:function onClick(){return deleteHandler(product._id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa-solid fa-trash\"}))));}))));}export default ProductListScreen;","map":{"version":3,"names":["React","useEffect","LinkContainer","Table","Button","Row","Col","Container","useDispatch","useSelector","Loader","Message","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","ProductListScreen","_ref","history","match","dispatch","productList","state","loading","error","products","productDelete","loadingDelete","errorDelete","successDelete","success","productCreate","loadingCreate","errorCreate","successCreate","createdProduct","product","userLogin","userInfo","type","is_admin","push","concat","_id","deleteHandler","id","window","confirm","createProductHandler","createElement","sm","size","className","onClick","variant","striped","bordered","hover","responsive","map","key","name","category","brand","price","to"],"sources":["/home/kaliuser/Documents/portfolio/commercial_apps/django-ecommerce/ecommerce-django-react/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { LinkContainer } from 'react-router-bootstrap'\nimport { Table, Button, Row, Col, Container } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport { listProducts, deleteProduct, createProduct } from '../actions/productActions'\n\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants'\n\n\nfunction ProductListScreen({ history, match }) {\n\n    const dispatch = useDispatch()\n\n    const productList = useSelector(state => state.productList)\n    const { loading, error, products } = productList\n\n    const productDelete = useSelector(state => state.productDelete)\n    const { loading: loadingDelete, error: errorDelete, success: successDelete } = productDelete\n\n    const productCreate = useSelector(state => state.productCreate)\n    const { loading: loadingCreate, error: errorCreate, success: successCreate, product: createdProduct } = productCreate\n\n    const userLogin = useSelector(state => state.userLogin)\n    const { userInfo } = userLogin\n\n\n    useEffect(() => {\n        dispatch({ type: PRODUCT_CREATE_RESET })\n\n        if (!userInfo.is_admin) {\n            history.push('/login')\n        }\n\n        if (successCreate) {\n            history.push(`/admin/product/${createdProduct._id}/edit`)\n        } else {\n            dispatch(listProducts())\n        }\n\n    }, [dispatch, history, userInfo, successDelete, successCreate, createProduct])\n\n    const deleteHandler = (id) => {\n        if (window.confirm('Are you shure you want to delete this product?')) {\n            dispatch(deleteProduct(id))\n        }\n    }\n\n    const createProductHandler = (product) => {\n        dispatch(createProduct())\n    }\n\n\n    return (\n        <Container>\n            <Row>\n                <Col sm={10}>\n                    <h1>Products</h1>\n                </Col>\n                <Col sm={2}>\n                    <Button size='sm' className='my-3' onClick={createProductHandler}>\n                        New product\n                    </Button>\n                </Col>\n            </Row>\n\n            {loadingDelete && <Loader />}\n            {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\n\n            {loadingCreate && <Loader />}\n            {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\n\n            {loading\n                ? (<Loader />)\n                : error\n                    ? (<Message variant='danger'>{error}</Message>)\n                    : (\n                        <Table striped bordered hover responsive className='table-sm'>\n                            <thead>\n                                <tr>\n                                    <th>ID</th>\n                                    <th>Name</th>\n                                    <th>Category</th>\n                                    <th>Brand</th>\n                                    <th>Price $</th>\n                                    <th></th>\n                                </tr>\n                            </thead>\n\n                            <tbody>\n                                {products.map(product => (\n                                    <tr key={product._id}>\n                                        <td>{product._id}</td>\n                                        <td>{product.name}</td>\n                                        <td>{product.category}</td>\n                                        <td>{product.brand}</td>\n                                        <td>{product.price}</td>\n                                        <td className='text-center'>\n                                            <LinkContainer to={`/admin/product/${product._id}/edit`} className='m-1'>\n                                                <Button className='btn-sm rounded'>\n                                                    <i className=\"fa-solid fa-marker\"></i>\n                                                </Button>\n                                            </LinkContainer>\n\n                                            <Button className='btn-sm rounded' onClick={() => deleteHandler(product._id)}>\n                                                <i className=\"fa-solid fa-trash\"></i>\n                                            </Button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </Table>\n                    )}\n        </Container>\n    )\n}\n\nexport default ProductListScreen"],"mappings":"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"},"metadata":{},"sourceType":"module"}